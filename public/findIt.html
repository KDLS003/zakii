<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Find It | Fhaund It</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #F8F3EC;
        }
        .navbar {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background-color: #D9CEC2;
            padding: 15px;
            background-image: url("https://media-hosting.imagekit.io//6538ca376a434863/logo.png?Expires=1836811963&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=S9wUQW9Q-zKBPTkpWLOWNI47Oa63ajrUTOzqhyE31Dt47mfemi7t8LVrPj-S3~WimqfrdBODlPCm38xCPA3Hv0ur3KV96ofqbmMKjyteRXQOhf-DsrSKLYx~LULxKJdgLOW6g-3Ld-OknQd-4mJ8BW6~-WPRAT3defFdtnXBs3L4vdCXOgzlEKmu1XuLtcWENxgUHZLwpar~JXsEMb59P~UwgMM4j4sly5wYwX1RrcbOK5s0RtcO1G9mY6BIVVkY8Qo979RH9x~T746fAtDPb7xjrxqduR6DkQRkaHoZ3ba1bOanSMA4x2swX0BV4kjfkWggGx~eeFPGNzCa-uD-oA__"); 
            background-size: 8%;
            width: 90%;
            background-repeat: no-repeat;
            background-position: center;
            margin: 2%;
            position: absolute;
        }
        .navbar a {
            text-decoration: none;
            color: black;
            font-weight: bold;
            font-size: 20px;
        }
        .logo {
            font-size: 22px;
            font-weight: bold;
            position: relative;
        }
        .logo img {
            background-image: url("https://media-hosting.imagekit.io//6538ca376a434863/logo.png?Expires=1836811963&Key-Pair-Id=K2ZIVPTIP2VGHC&Signature=S9wUQW9Q-zKBPTkpWLOWNI47Oa63ajrUTOzqhyE31Dt47mfemi7t8LVrPj-S3~WimqfrdBODlPCm38xCPA3Hv0ur3KV96ofqbmMKjyteRXQOhf-DsrSKLYx~LULxKJdgLOW6g-3Ld-OknQd-4mJ8BW6~-WPRAT3defFdtnXBs3L4vdCXOgzlEKmu1XuLtcWENxgUHZLwpar~JXsEMb59P~UwgMM4j4sly5wYwX1RrcbOK5s0RtcO1G9mY6BIVVkY8Qo979RH9x~T746fAtDPb7xjrxqduR6DkQRkaHoZ3ba1bOanSMA4x2swX0BV4kjfkWggGx~eeFPGNzCa-uD-oA__");
            width: 100px;
            vertical-align: middle;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 30px 5%;
            padding-top: 80px;
        }

        .header-title {
            font-size: 2rem;
            font-weight: bold;
        }

        .sort-dropdown {
            padding: 6px;
            font-size: 16px;
            border-radius: 9px;
            background-color: #d2e0d3;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 20px;
            justify-items: center;
        }
        .card {
            background: #f5e6e0;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            width: 300px;
        }
        .image-box {
            width: 100px;
            height: 100px;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            overflow: hidden;
            margin: 0 auto;
        }
        .image-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .details {
            display: none;
            margin-top: 10px;
        }

        footer {
            background-color: #f8f8f8;
            padding: 15px 20px;
            border-top: 2px solid #000;
        }

        .footer-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
        }

        .footer-logo img {
            width: 130px;
            height: 50px; 
        }

        .footer-text {
            text-align: center;
            font-size: 14px;
            color: #333;
            flex: 1; 
        }

        .footer-right {
            text-align: right;
            font-size: 14px;
            color: #333;
        }
    </style>
</head>
<body>
    <!--NAVIGATION-->
    <nav class="navbar">
        <a href="contact.html">contact us</a>
        <a href="findIt.html">find it</a>
        <div>
            <section class="logo"></section>
        </div>
        <a href="index.html">home</a>
        <a href="about.html">about us</a>
    </nav>

    <!-- Header with Sorting -->
    <div class="header-container">
        <h1 class="header-title">Lost Something?</h1>
        <select class="sort-dropdown" id="sortOptions" onchange="sortCards()">
            <option value="name">sort by name</option>
            <option value="location">sort by location</option>
            <option value="date">sort by date</option>
        </select>
    </div>

    <!-- Cards Section -->
    <div class="cards-container" id="cardsContainer">
        <!-- Items will be loaded here dynamically -->
      </div>


    <!-- FOOTER -->
    <footer>
        <div class="footer-container">
            <div class="footer-logo">
                <img src="images/logo.png" alt="FhaundIT Logo">
            </div>
            <div class="footer-text">
                <p>In collaboration with HAU Campus Services Office</p>
                <p><a href="https://hau.edu.ph">hau.edu.ph</a></p>
                <p>#123 Holy Angel St, Angeles, 2009 Pampanga, Philippines</p>
            </div>
            <div class="footer-right">
                <p>Â©2025 WD-302</p>
                <p>All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        let allItems = [];
      
        // Toggle card details on image click
        function toggleDetails(box) {
          let details = box.parentElement.querySelector(".details");
          if (details.style.display === "block") {
            details.style.display = "none";
          } else {
            details.style.display = "block";
          }
        }
      
        // Load items from backend
        function loadItems() {
          fetch("http://localhost:3000/api/items")
            .then(response => response.json())
            .then(data => {
              if (!Array.isArray(data)) {
                console.error("Expected array, got:", data);
                return;
              }
              allItems = data;
              renderItems(allItems);
            })
            .catch(err => console.error("Error loading items:", err));
        }
      
        // Render sorted or default items
        function renderItems(items) {
          const container = document.getElementById("cardsContainer");
          container.innerHTML = "";
      
          items.forEach(item => {
            const card = document.createElement("div");
            card.className = "card";
            card.setAttribute("data-name", item.name);
            card.setAttribute("data-location", item.location);
            card.setAttribute("data-date", item.dateFound);
      
            card.innerHTML = `
              <div class="image-box" onclick="toggleDetails(this)">
                <img src="${item.image ? item.image : 'https://via.placeholder.com/100'}" alt="Lost Item">
              </div>
              <div class="details" style="display:none;">
                <p><strong>Name:</strong> ${item.name}</p>
                <p><strong>Location found:</strong> ${item.location}</p>
                <p><strong>Date found:</strong> ${item.dateFound}</p>
                <p><strong>Status:</strong> ${item.status}</p>
              </div>
            `;
            container.appendChild(card);
          });
        }
      
        // Sort and re-render cards
        function sortCards() {
          const option = document.getElementById("sortOptions").value;
          const sorted = [...allItems]; // create copy
      
          sorted.sort((a, b) => {
            if (option === "name") {
              return a.name.localeCompare(b.name);
            } else if (option === "location") {
              return a.location.localeCompare(b.location);
            } else if (option === "date") {
              return new Date(a.dateFound) - new Date(b.dateFound);
            }
            return 0;
          });
      
          renderItems(sorted);
        }
      
        window.onload = loadItems;
      </script>
      
</body>
</html>
